<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {% csrf_token %}
    <meta name="csrf-token" content="{{ csrf_token }}">
    <title>{% block title %}Fit Control{% endblock %}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <style>
        [x-cloak] { display: none !important; }
        /* Custom color scheme for fitness/sports theme */
        :root {
            --primary-green: #10B981;
            --primary-green-dark: #059669;
            --primary-green-light: #34D399;
            --primary-black: #111827;
            --primary-black-light: #1F2937;
            --accent-red: #EF4444;
            --accent-yellow: #F59E0B;
            --accent-blue: #3B82F6;
        }
        
        /* Toast Notification Styles */
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 9999;
            min-width: 300px;
            max-width: 500px;
            padding: 16px 20px;
            border-radius: 8px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            animation: slideInRight 0.3s ease-out;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .toast-success {
            background-color: #10B981;
            color: white;
        }
        
        .toast-error {
            background-color: #EF4444;
            color: white;
        }
        
        .toast-warning {
            background-color: #F59E0B;
            color: white;
        }
        
        .toast-info {
            background-color: #3B82F6;
            color: white;
        }
        
        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        @keyframes slideOutRight {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(100%);
                opacity: 0;
            }
        }
        
        .toast-exit {
            animation: slideOutRight 0.3s ease-out forwards;
        }
        
        /* Tooltip Styles */
        .tooltip {
            position: relative;
            display: inline-block;
        }
        
        .tooltip .tooltiptext {
            visibility: hidden;
            background-color: #1F2937;
            color: white;
            text-align: center;
            border-radius: 6px;
            padding: 8px 12px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 12px;
            white-space: nowrap;
        }
        
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
        
        /* Field validation styles */
        .field-error {
            border-color: #EF4444 !important;
            box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.1) !important;
        }
        
        .field-success {
            border-color: #10B981 !important;
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1) !important;
        }
        
        .error-message {
            color: #EF4444;
            font-size: 12px;
            margin-top: 4px;
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Toast Notification Container -->
    <div id="toast-container" class="fixed top-4 right-4 z-50 space-y-2"></div>
    
    {% block content %}{% endblock %}
    
    <script>
        // Toast Notification System
        function showToast(message, type = 'info', duration = 5000) {
            const container = document.getElementById('toast-container');
            if (!container) return;
            
            const toast = document.createElement('div');
            toast.className = `toast toast-${type}`;
            
            const icon = {
                success: '✓',
                error: '✕',
                warning: '⚠',
                info: 'ℹ'
            }[type] || 'ℹ';
            
            toast.innerHTML = `
                <span class="font-bold text-lg">${icon}</span>
                <span class="flex-1">${message}</span>
                <button onclick="this.parentElement.remove()" class="ml-4 text-white hover:text-gray-200">×</button>
            `;
            
            container.appendChild(toast);
            
            setTimeout(() => {
                toast.classList.add('toast-exit');
                setTimeout(() => toast.remove(), 300);
            }, duration);
        }
        
        // Field validation helper
        function validateField(input, validator) {
            const value = input.value;
            const isValid = validator(value);
            
            input.classList.remove('field-error', 'field-success');
            const existingError = input.parentElement.querySelector('.error-message');
            if (existingError) {
                existingError.remove();
            }
            
            if (value === '') {
                return true; // Empty is valid (unless required)
            }
            
            if (isValid) {
                input.classList.add('field-success');
            } else {
                input.classList.add('field-error');
                const errorDiv = document.createElement('div');
                errorDiv.className = 'error-message';
                errorDiv.textContent = 'Noto\'g\'ri format';
                input.parentElement.appendChild(errorDiv);
            }
            
            return isValid;
        }
        
        // Phone validator
        function validatePhone(phone) {
            const phoneRegex = /^\+?998\d{9}$/;
            return phoneRegex.test(phone.replace(/\s/g, ''));
        }
        
        // Email validator
        function validateEmail(email) {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailRegex.test(email);
        }
    </script>
</body>
</html>
